<!DOCTYPE html>
<html lang="en">
<head>
	<script src="js/jquery.js" type="text/javascript"></script>
	<style type="text/css">
		.row {
			padding-top:1.5em;
		}
	</style>
    <script>
    	let status = "OFF";

        function myFunction() {
        	if(status == "OFF")
        		status = "ON";
        	else status = "OFF"
            /*$.post( "http://localhost:9070/light", function( data ) {
                 //As soon as the browser finished downloading, this function is called.
                 $('#demo').html(data);
            });*/
            var http = new XMLHttpRequest();
			var url = "http://localhost:9070/light";

			var params = JSON.stringify({status: status});
			http.open("POST", url, true);

			//Send the proper header information along with the request
			http.setRequestHeader("Content-type","application/x-www-form-urlencoded");

			http.onreadystatechange = function() {//Call a function when the state changes.
			    if(http.readyState == 4 && http.status == 200) {
			        alert(http.responseText);
			    }
			}

			http.send(JSON.stringify({status: status}));
        }
	</script>
</head>
<body>
	<div class="container">

		<div class="row">
			<div class="span4 offset 3">
				<center><h2>PELUCHE APP</h2></center>
			</div>

		</div>
		<div class="row">
    		<button onclick="myFunction()">Changes the light</button>
			<p id="demo"></p>   		
		</div>

		<div class="row">
			<div class="span6 offset1">
				<div id="log">Nothing to show yet</div>
			</div>
		</div>

	</div>

</body>
</html>
